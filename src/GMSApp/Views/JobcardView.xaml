<UserControl x:Class="GMSApp.Views.JobcardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="600" Width="900">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>

        <!-- DataGrid with ContextMenu -->
        <DataGrid Grid.Column="0"
                  ItemsSource="{Binding Jobcards}"
                  SelectedItem="{Binding SelectedJobcard}"
                  AutoGenerateColumns="False"
                  IsReadOnly="False"
                  Margin="5">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" IsReadOnly="True"/>
                <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" />
                <DataGridTextColumn Header="Job Date" Binding="{Binding JobDate}" />
                <DataGridTextColumn Header="Description" Binding="{Binding JobDescription}" />
                <DataGridTextColumn Header="Estimated Cost" Binding="{Binding EstimatedCost}" />
                <DataGridTextColumn Header="Actual Cost" Binding="{Binding ActualCost}" />
                <DataGridTextColumn Header="Completion Date" Binding="{Binding CompletionDate}" />
            </DataGrid.Columns>

            <DataGrid.ContextMenu>
                <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                    <MenuItem Header="Edit (Save)" Command="{Binding SaveCommand}" />
                    <MenuItem Header="Delete" Command="{Binding DeleteCommand}" />
                    <MenuItem Header="Upload Image" Command="{Binding UploadImageCommand}" />
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid>

        <!-- Image & Buttons -->
        <StackPanel Grid.Column="1" Margin="10">
            <TextBlock Text="Property Image" FontWeight="Bold" Margin="0,0,0,5"/>
            <Image Source="{Binding JobcardImagePreview}" Height="180" Stretch="Uniform" Margin="0,0,0,10" />
            <Button Content="Upload Image" Command="{Binding UploadImageCommand}" Margin="0,5,0,5"/>
            <Button Content="Export All to PDF" Command="{Binding ExportPdfCommand}" />
        </StackPanel>

        <!-- Footer Buttons -->
        <StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="10">
            <Button Content="Load" Command="{Binding LoadCommand}" Width="80" Margin="5"/>
            <Button Content="Save" Command="{Binding SaveCommand}" Width="80" Margin="5"/>
            <Button Content="Delete" Command="{Binding DeleteCommand}" Width="80" Margin="5"/>
        </StackPanel>
    </Grid>
</UserControl>
