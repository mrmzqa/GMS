<UserControl x:Class="GMSApp.Views.Job.JobOrder"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:viewmodels="clr-namespace:GMSApp.ViewModels.Job" 
             mc:Ignorable="d" 

             >

    <Grid Margin="0" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,10">
            <Label Content="Search:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBox Width="250" x:Name="SearchBox" 
           />
            <Button Content="Clear" Margin="5,0,0,0" />
            <Button Content="Add" Margin="20,0,0,0" Width="100" Command="{Binding AddJoborderCommand}" />
        </StackPanel>

        <DataGrid Grid.Row="1" ItemsSource="{Binding Joborders}" SelectedItem="{Binding SelectedJoborder, Mode=TwoWay}" AutoGenerateColumns="True"
              CanUserAddRows="True" CanUserDeleteRows="True" IsReadOnly="True" SelectionMode="Single">

        </DataGrid>
        
       
        <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False" CanUserAddRows="False" RenderTransformOrigin="0.501,0.452" Margin="0,264,0,210" Grid.Row="1"  >
            
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="100"/>
                <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" Width="100"/>
                <DataGridTextColumn Header="Price" Binding="{Binding Price}" Width="100"/>
                <DataGridTemplateColumn Header="Action" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Delete"
                        Command="{Binding DataContext.RemoveItemCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                        CommandParameter="{Binding}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>

        </DataGrid>

        <Border Grid.Row="1" BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0,344,0,0" Height="200" Background="#FFF9F9F9">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Label Content="Customer Name:" Grid.Column="0" VerticalAlignment="Center" Grid.Row="0"/>
                <TextBox Text="{Binding SelectedJoborder.CustomerName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Margin="5" Grid.Row="0"/>

                <Label Content="Phonenumber" Grid.Column="2" VerticalAlignment="Center" Grid.Row="0"/>
                <TextBox Text="{Binding SelectedJoborder.Phonenumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Margin="5" Grid.Row="0"/>

                <Label Content="VehicleNumber:" Grid.Column="0" VerticalAlignment="Center" Grid.Row="1"/>
                <TextBox Text="{Binding SelectedJoborder.VehicleNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Margin="5" Grid.Row="1"/>

                <Label Content="Brand:" Grid.Column="2" VerticalAlignment="Center" Grid.Row="1"/>
                <TextBox Text="{Binding SelectedJoborder.Brand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Margin="5" Grid.Row="1"/>

                <Label Content="Model:" Grid.Column="0" VerticalAlignment="Center" Grid.Row="2"/>
                <TextBox Text="{Binding SelectedJoborder.Model, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Margin="5" Grid.Row="2"/>

                <Label Content="Odo:" Grid.Column="2" VerticalAlignment="Center" Grid.Row="2"/>
                <TextBox Text="{Binding SelectedJoborder.OdoNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Margin="5" Grid.Row="2"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="3" Margin="0,10,0,0">
                    <Button Content="Update" Width="100" Margin="0,0,5,0" Command="{Binding UpdateJoborderCommand}" IsEnabled="True"/>
                    <Button Content="Delete" Width="100" Command="{Binding DeleteJoborderCommand}" IsEnabled="True"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Column="2" Grid.Row="3" Margin="0,10,0,0">
                    <Button Content="Payment" Width="50" Margin="5,0"></Button>
                    <Button Content="Print" Width="50" Margin="5,0"></Button>
                </StackPanel>
            </Grid>
        </Border>

        <Button Content="AddItem" Command="{Binding AddItemCommand}" HorizontalAlignment="Left" Margin="473,1,0,0" VerticalAlignment="Top" Height="25" Width="77"/>
        <Button Content="SaveItem" Command="{Binding SaveCommand}" HorizontalAlignment="Left" Margin="555,1,0,0" VerticalAlignment="Top" Height="25" Width="77"/>

        <Image HorizontalAlignment="Left" Height="36" Margin="33,469,0,0" Grid.Row="1" VerticalAlignment="Top" Width="40">
            <Image.Source>
                <Binding Path="SelectedJoborder.FrontFile" Converter="{StaticResource ByteArrayToImageConverter}" />
            </Image.Source>
        </Image>

        <Image HorizontalAlignment="Left" Height="36" Margin="181,469,0,0" Grid.Row="1" VerticalAlignment="Top" Width="40" RenderTransformOrigin="0.5,0.584">
            <Image.Source>
                <Binding Path="SelectedJoborder.BackFile" Converter="{StaticResource ByteArrayToImageConverter}" />
            </Image.Source>
        </Image>
        <Image HorizontalAlignment="Left" Height="36" Margin="129,469,0,0" Grid.Row="1" VerticalAlignment="Top" Width="40">
            <Image.Source>
                <Binding Path="SelectedJoborder.LeftFile" Converter="{StaticResource ByteArrayToImageConverter}" />
            </Image.Source>
        </Image>
        <Image HorizontalAlignment="Left" Height="36" Margin="81,469,0,0" Grid.Row="1" VerticalAlignment="Top" Width="40" RenderTransformOrigin="0.5,0.501">
            <Image.Source>
                <Binding Path="SelectedJoborder.RightFile" Converter="{StaticResource ByteArrayToImageConverter}" />

            </Image.Source>
        </Image>
        <Button Height="25" Width="25" Margin="44,513,730,26" Grid.Row="1"  Command="{Binding FrontFileCommand}">F</Button>
        <Button Height="25" Width="25" Margin="90,513,686,26" Grid.Row="1" Content="B" RenderTransformOrigin="0.9,0.521"  Command="{Binding BackFileCommand}"/>
        <Button Height="25" Width="25" Margin="139,513,636,26" Grid.Row="1" Content="L" RenderTransformOrigin="0.9,0.521"  Command="{Binding LeftFileCommand}"/>
        <Button Height="25" Width="25" Margin="190,513,585,26" Grid.Row="1" Content="R" RenderTransformOrigin="0.9,0.521"  Command="{Binding RightFileCommand}"/>
       

    </Grid>
</UserControl>